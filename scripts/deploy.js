const hre=require("hardhat");require("dotenv").config();const REALM_TOKEN="0xBA2cA14375b2cECA4f04350Bd014B375Bc014ad2";const REALM_DAO_V3="0x157A257228c5FebB7F332a8E492F0037f3A0526f";const REG_FEE=hre.ethers.parseEther("100");async function main(){console.log("== RealmAgents Deploy ==\n");const dk=process.env.DEPLOY_PRIVATE_KEY;if(!dk){console.error("Set DEPLOY_PRIVATE_KEY in .env");process.exit(1)}const p=new hre.ethers.JsonRpcProvider(`https://base-mainnet.g.alchemy.com/v2/${process.env.ALCHEMY_KEY}`);const d=new hre.ethers.Wallet(dk,p);console.log("Deployer:",d.address);const bal=await p.getBalance(d.address);console.log("ETH:",hre.ethers.formatEther(bal),"\n");if(bal<hre.ethers.parseEther("0.005")){console.error("Need 0.005 ETH min. Send to:",d.address);process.exit(1)}console.log("1/3 AgentRegistry...");const R=await hre.ethers.getContractFactory("AgentRegistry",d);const r=await R.deploy(REALM_TOKEN,REG_FEE);await r.waitForDeployment();const ra=await r.getAddress();console.log("Registry:",ra,"\n");console.log("2/3 RevenueRouter...");const V=await hre.ethers.getContractFactory("RevenueRouter",d);const v=await V.deploy(REALM_TOKEN,ra,REALM_DAO_V3);await v.waitForDeployment();const va=await v.getAddress();console.log("Router:",va,"\n");console.log("3/3 AgentLaunchpad...");const L=await hre.ethers.getContractFactory("AgentLaunchpad",d);const l=await L.deploy(REALM_TOKEN,ra,va);await l.waitForDeployment();const la=await l.getAddress();console.log("Launchpad:",la,"\n");console.log("Transferring ownership to RealmDAO v3...");await(await r.transferOwnership(REALM_DAO_V3)).wait();await(await v.transferOwnership(REALM_DAO_V3)).wait();await(await l.transferOwnership(REALM_DAO_V3)).wait();console.log("\n== DEPLOY COMPLETE ==");console.log("Registry:",ra);console.log("Router:",va);console.log("Launchpad:",la);console.log("Owner: RealmDAO v3")}main().then(()=>process.exit(0)).catch(e=>{console.error(e);process.exit(1)});
